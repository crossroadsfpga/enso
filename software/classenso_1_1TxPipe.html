<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ensō: enso::TxPipe Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="enso-black.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo">
    <a href="../">
      <picture>
        <source srcset="enso-white.svg" media="(prefers-color-scheme:dark)">
        <img alt="Logo" src="enso-black.svg">
      </picture>
    </a>
  </td>
  <!-- <td id="projectlogo"><a href="../"><img alt="Logo" src="enso-black.svg"/></a></td> -->
  <td id="projectalign">
   <div id="projectname">Ensō<span id="projectnumber">&#160;0.4.6</span>
   </div>
   <div id="projectbrief">Software API reference</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classenso_1_1TxPipe.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classenso_1_1TxPipe-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">enso::TxPipe Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A class that represents a TX Enso Pipe.  
 <a href="classenso_1_1TxPipe.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="pipe_8h_source.html">pipe.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab99bac1f930fa32d29e24e54bc7e8da7"><td class="memItemLeft" align="right" valign="top"><a id="ab99bac1f930fa32d29e24e54bc7e8da7" name="ab99bac1f930fa32d29e24e54bc7e8da7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TxPipe</b> (const <a class="el" href="classenso_1_1TxPipe.html">TxPipe</a> &amp;)=delete</td></tr>
<tr class="separator:ab99bac1f930fa32d29e24e54bc7e8da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a681acb0736cc1bebeccd7fcc2790e87e"><td class="memItemLeft" align="right" valign="top"><a id="a681acb0736cc1bebeccd7fcc2790e87e" name="a681acb0736cc1bebeccd7fcc2790e87e"></a>
<a class="el" href="classenso_1_1TxPipe.html">TxPipe</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classenso_1_1TxPipe.html">TxPipe</a> &amp;)=delete</td></tr>
<tr class="separator:a681acb0736cc1bebeccd7fcc2790e87e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf0185404421a8f6eaa9b6e44adbd5b9"><td class="memItemLeft" align="right" valign="top"><a id="aaf0185404421a8f6eaa9b6e44adbd5b9" name="aaf0185404421a8f6eaa9b6e44adbd5b9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TxPipe</b> (<a class="el" href="classenso_1_1TxPipe.html">TxPipe</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:aaf0185404421a8f6eaa9b6e44adbd5b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1051256dc80d16dddff2ae77287cfab1"><td class="memItemLeft" align="right" valign="top"><a id="a1051256dc80d16dddff2ae77287cfab1" name="a1051256dc80d16dddff2ae77287cfab1"></a>
<a class="el" href="classenso_1_1TxPipe.html">TxPipe</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classenso_1_1TxPipe.html">TxPipe</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a1051256dc80d16dddff2ae77287cfab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45762501055df470f8c6bb2d747e8228"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#a45762501055df470f8c6bb2d747e8228">AllocateBuf</a> (uint32_t target_capacity=0)</td></tr>
<tr class="memdesc:a45762501055df470f8c6bb2d747e8228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a buffer in the pipe.  <br /></td></tr>
<tr class="separator:a45762501055df470f8c6bb2d747e8228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f61c0c8b42904c58459dcde6e51ae0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#a4f61c0c8b42904c58459dcde6e51ae0d">SendAndFree</a> (uint32_t nb_bytes)</td></tr>
<tr class="memdesc:a4f61c0c8b42904c58459dcde6e51ae0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends and deallocates a given number of bytes.  <br /></td></tr>
<tr class="separator:a4f61c0c8b42904c58459dcde6e51ae0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8653a12e93e8899f831945d598940f2c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#a8653a12e93e8899f831945d598940f2c">TryExtendBuf</a> ()</td></tr>
<tr class="memdesc:a8653a12e93e8899f831945d598940f2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Explicitly requests a best-effort buffer extension.  <br /></td></tr>
<tr class="separator:a8653a12e93e8899f831945d598940f2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07595636f9a03cb356d30fd7cd31e319"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#a07595636f9a03cb356d30fd7cd31e319">ExtendBufToTarget</a> (uint32_t target_capacity)</td></tr>
<tr class="memdesc:a07595636f9a03cb356d30fd7cd31e319"><td class="mdescLeft">&#160;</td><td class="mdescRight">Explicitly requests a buffer extension with a target capacity.  <br /></td></tr>
<tr class="separator:a07595636f9a03cb356d30fd7cd31e319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657f7225e695b20cc71136747e276952"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#a657f7225e695b20cc71136747e276952">capacity</a> () const</td></tr>
<tr class="memdesc:a657f7225e695b20cc71136747e276952"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the allocated buffer's current available capacity.  <br /></td></tr>
<tr class="separator:a657f7225e695b20cc71136747e276952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa89ed1148168c3702d8547b3d15089ec"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#aa89ed1148168c3702d8547b3d15089ec">pending_transmission</a> () const</td></tr>
<tr class="memdesc:aa89ed1148168c3702d8547b3d15089ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of bytes that are currently being transmitted.  <br /></td></tr>
<tr class="separator:aa89ed1148168c3702d8547b3d15089ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeecea22ed88241a2ebeb78491eeb79cb"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#aeecea22ed88241a2ebeb78491eeb79cb">buf</a> () const</td></tr>
<tr class="memdesc:aeecea22ed88241a2ebeb78491eeb79cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the pipe's internal buffer.  <br /></td></tr>
<tr class="separator:aeecea22ed88241a2ebeb78491eeb79cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb23a92e08c8adeda2a53444c2582628"><td class="memItemLeft" align="right" valign="top">enso_pipe_id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#afb23a92e08c8adeda2a53444c2582628">id</a> () const</td></tr>
<tr class="memdesc:afb23a92e08c8adeda2a53444c2582628"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the pipe's ID.  <br /></td></tr>
<tr class="separator:afb23a92e08c8adeda2a53444c2582628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0efac025c2a9c85093a7ae728372dd7a"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#a0efac025c2a9c85093a7ae728372dd7a">context</a> () const</td></tr>
<tr class="memdesc:a0efac025c2a9c85093a7ae728372dd7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the context associated with the pipe.  <br /></td></tr>
<tr class="separator:a0efac025c2a9c85093a7ae728372dd7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6e38da0f8e5346fd095bfa3396052fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#aa6e38da0f8e5346fd095bfa3396052fb">set_context</a> (void *new_context)</td></tr>
<tr class="memdesc:aa6e38da0f8e5346fd095bfa3396052fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the context associated with the pipe.  <br /></td></tr>
<tr class="separator:aa6e38da0f8e5346fd095bfa3396052fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ac5ea7bc381df0483e6d478fb3775b930"><td class="memItemLeft" align="right" valign="top">static constexpr uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#ac5ea7bc381df0483e6d478fb3775b930">kQuantumSize</a> = 64</td></tr>
<tr class="separator:ac5ea7bc381df0483e6d478fb3775b930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32c0c96558b1688da50db2e734130e44"><td class="memItemLeft" align="right" valign="top">static constexpr uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#a32c0c96558b1688da50db2e734130e44">kMaxCapacity</a> = kEnsoPipeSize * 64 - <a class="el" href="classenso_1_1TxPipe.html#ac5ea7bc381df0483e6d478fb3775b930">kQuantumSize</a></td></tr>
<tr class="separator:a32c0c96558b1688da50db2e734130e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a520fa05e0bf58785da428f7a0241eee2"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classenso_1_1TxPipe.html#a520fa05e0bf58785da428f7a0241eee2">Device</a></td></tr>
<tr class="separator:a520fa05e0bf58785da428f7a0241eee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class that represents a TX Enso Pipe. </p>
<p>Should be instantiated using a <a class="el" href="classenso_1_1Device.html" title="A class that represents a device.">Device</a> object.</p>
<p>Example: </p><div class="fragment"><div class="line"><a class="code hl_class" href="classenso_1_1Device.html">enso::Device</a>* device = <a class="code hl_function" href="classenso_1_1Device.html#a0c300092e23104fa44bd72d103b27d5e">enso::Device::Create</a>(pcie_addr);</div>
<div class="line"><a class="code hl_class" href="classenso_1_1TxPipe.html">enso::TxPipe</a>* tx_pipe = device-&gt;<a class="code hl_function" href="classenso_1_1Device.html#aefb1883e2b2443ffb30e3697fcd8e6bb">AllocateTxPipe</a>();</div>
<div class="line">uint8_t* <a class="code hl_function" href="classenso_1_1TxPipe.html#aeecea22ed88241a2ebeb78491eeb79cb">buf</a> = tx_pipe-&gt;<a class="code hl_function" href="classenso_1_1TxPipe.html#a45762501055df470f8c6bb2d747e8228">AllocateBuf</a>(data_size);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// AllocateBuf with a non-zero argument may block waiting for the capacity</span></div>
<div class="line"><span class="comment">// to be free. Alternatively, one may use AllocateBuf with data_size = 0</span></div>
<div class="line"><span class="comment">// and use and useTryExtendBuf to avoid blocking, potentially dropping</span></div>
<div class="line"><span class="comment">// data instead of waiting.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Fill the buffer with data.</span></div>
<div class="line">[...]</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Send the data and retrieve a new buffer.</span></div>
<div class="line">tx_pipe-&gt;<a class="code hl_function" href="classenso_1_1TxPipe.html#a4f61c0c8b42904c58459dcde6e51ae0d">SendAndFree</a>(data_size);</div>
<div class="line"><a class="code hl_function" href="classenso_1_1TxPipe.html#aeecea22ed88241a2ebeb78491eeb79cb">buf</a> = tx_pipe.<a class="code hl_function" href="classenso_1_1TxPipe.html#a45762501055df470f8c6bb2d747e8228">AllocateBuf</a>(data_size);</div>
<div class="ttc" id="aclassenso_1_1Device_html"><div class="ttname"><a href="classenso_1_1Device.html">enso::Device</a></div><div class="ttdoc">A class that represents a device.</div><div class="ttdef"><b>Definition:</b> <a href="pipe_8h_source.html#l00082">pipe.h:82</a></div></div>
<div class="ttc" id="aclassenso_1_1Device_html_a0c300092e23104fa44bd72d103b27d5e"><div class="ttname"><a href="classenso_1_1Device.html#a0c300092e23104fa44bd72d103b27d5e">enso::Device::Create</a></div><div class="ttdeci">static std::unique_ptr&lt; Device &gt; Create(const std::string &amp;pcie_addr=&quot;&quot;, const std::string &amp;huge_page_prefix=&quot;&quot;) noexcept</div><div class="ttdoc">Factory method to create a device.</div><div class="ttdef"><b>Definition:</b> <a href="pipe_8cpp_source.html#l00149">pipe.cpp:149</a></div></div>
<div class="ttc" id="aclassenso_1_1Device_html_aefb1883e2b2443ffb30e3697fcd8e6bb"><div class="ttname"><a href="classenso_1_1Device.html#aefb1883e2b2443ffb30e3697fcd8e6bb">enso::Device::AllocateTxPipe</a></div><div class="ttdeci">TxPipe * AllocateTxPipe(uint8_t *buf=nullptr) noexcept</div><div class="ttdoc">Allocates a TX pipe.</div><div class="ttdef"><b>Definition:</b> <a href="pipe_8cpp_source.html#l00205">pipe.cpp:205</a></div></div>
<div class="ttc" id="aclassenso_1_1TxPipe_html"><div class="ttname"><a href="classenso_1_1TxPipe.html">enso::TxPipe</a></div><div class="ttdoc">A class that represents a TX Enso Pipe.</div><div class="ttdef"><b>Definition:</b> <a href="pipe_8h_source.html#l00782">pipe.h:782</a></div></div>
<div class="ttc" id="aclassenso_1_1TxPipe_html_a45762501055df470f8c6bb2d747e8228"><div class="ttname"><a href="classenso_1_1TxPipe.html#a45762501055df470f8c6bb2d747e8228">enso::TxPipe::AllocateBuf</a></div><div class="ttdeci">uint8_t * AllocateBuf(uint32_t target_capacity=0)</div><div class="ttdoc">Allocates a buffer in the pipe.</div><div class="ttdef"><b>Definition:</b> <a href="pipe_8h_source.html#l00819">pipe.h:819</a></div></div>
<div class="ttc" id="aclassenso_1_1TxPipe_html_a4f61c0c8b42904c58459dcde6e51ae0d"><div class="ttname"><a href="classenso_1_1TxPipe.html#a4f61c0c8b42904c58459dcde6e51ae0d">enso::TxPipe::SendAndFree</a></div><div class="ttdeci">void SendAndFree(uint32_t nb_bytes)</div><div class="ttdoc">Sends and deallocates a given number of bytes.</div><div class="ttdef"><b>Definition:</b> <a href="pipe_8h_source.html#l00841">pipe.h:841</a></div></div>
<div class="ttc" id="aclassenso_1_1TxPipe_html_aeecea22ed88241a2ebeb78491eeb79cb"><div class="ttname"><a href="classenso_1_1TxPipe.html#aeecea22ed88241a2ebeb78491eeb79cb">enso::TxPipe::buf</a></div><div class="ttdeci">uint8_t * buf() const</div><div class="ttdoc">Returns the pipe's internal buffer.</div><div class="ttdef"><b>Definition:</b> <a href="pipe_8h_source.html#l00922">pipe.h:922</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00782">782</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a45762501055df470f8c6bb2d747e8228" name="a45762501055df470f8c6bb2d747e8228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45762501055df470f8c6bb2d747e8228">&#9670;&#160;</a></span>AllocateBuf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * enso::TxPipe::AllocateBuf </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>target_capacity</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocates a buffer in the pipe. </p>
<p>There can only be a single buffer allocated at a time for a given Pipe. Calling this function again when a buffer is already allocated will return the same address.</p>
<p>The buffer capacity can be retrieved by calling <code><a class="el" href="classenso_1_1TxPipe.html#a657f7225e695b20cc71136747e276952" title="Returns the allocated buffer&#39;s current available capacity.">capacity()</a></code>. Note that the buffer capacity can increase without notice but will never decrease. The user can also explicitly request for the buffer to be extended by calling <code><a class="el" href="classenso_1_1TxPipe.html#a07595636f9a03cb356d30fd7cd31e319" title="Explicitly requests a buffer extension with a target capacity.">ExtendBufToTarget()</a></code>.</p>
<p>The buffer is valid until the user calls <code><a class="el" href="classenso_1_1TxPipe.html#a4f61c0c8b42904c58459dcde6e51ae0d" title="Sends and deallocates a given number of bytes.">SendAndFree()</a></code>. In which case, the buffer will be freed and a new one must be allocated by calling this function again.</p>
<p>If <code><a class="el" href="classenso_1_1TxPipe.html#a4f61c0c8b42904c58459dcde6e51ae0d" title="Sends and deallocates a given number of bytes.">SendAndFree()</a></code> only partially sends the buffer, the previous buffer address will still not be valid. But allocating a new buffer will return a a buffers that starts with the remaining data.</p>
<dl class="section warning"><dt>Warning</dt><dd>The capacity will never be go beyond <code><a class="el" href="classenso_1_1TxPipe.html#a32c0c96558b1688da50db2e734130e44">TxPipe::kMaxCapacity</a></code>. Therefore, specifying a <code>target_capacity</code> larger than <code><a class="el" href="classenso_1_1TxPipe.html#a32c0c96558b1688da50db2e734130e44">TxPipe::kMaxCapacity</a></code> will cause this function to block forever.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_capacity</td><td>Target capacity of the buffer. It will block until the buffer is at least this big. May set it to 0 to avoid blocking (the default).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The allocated buffer address. </dd></dl>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00819">819</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<a id="aeecea22ed88241a2ebeb78491eeb79cb" name="aeecea22ed88241a2ebeb78491eeb79cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeecea22ed88241a2ebeb78491eeb79cb">&#9670;&#160;</a></span>buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * enso::TxPipe::buf </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the pipe's internal buffer. </p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the start of the pipe's internal buffer. </dd></dl>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00922">922</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<a id="a657f7225e695b20cc71136747e276952" name="a657f7225e695b20cc71136747e276952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a657f7225e695b20cc71136747e276952">&#9670;&#160;</a></span>capacity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t enso::TxPipe::capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the allocated buffer's current available capacity. </p>
<p>The buffer capacity can increase without notice but will never decrease. The user can use this function to check the current capacity.</p>
<dl class="section return"><dt>Returns</dt><dd>The capacity of the allocated buffer in bytes. </dd></dl>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00904">904</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<a id="a0efac025c2a9c85093a7ae728372dd7a" name="a0efac025c2a9c85093a7ae728372dd7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0efac025c2a9c85093a7ae728372dd7a">&#9670;&#160;</a></span>context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * enso::TxPipe::context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the context associated with the pipe. </p>
<p>Applications can use context to associate arbitrary pointers with a given pipe that can later be retrieved in a different point.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classenso_1_1TxPipe.html#aa6e38da0f8e5346fd095bfa3396052fb" title="Sets the context associated with the pipe.">TxPipe::set_context()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The context associated with the pipe. </dd></dl>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00941">941</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<a id="a07595636f9a03cb356d30fd7cd31e319" name="a07595636f9a03cb356d30fd7cd31e319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07595636f9a03cb356d30fd7cd31e319">&#9670;&#160;</a></span>ExtendBufToTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t enso::TxPipe::ExtendBufToTarget </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>target_capacity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Explicitly requests a buffer extension with a target capacity. </p>
<p>Different from <code><a class="el" href="classenso_1_1TxPipe.html#a8653a12e93e8899f831945d598940f2c" title="Explicitly requests a best-effort buffer extension.">TryExtendBuf()</a></code>, this function will block until the capacity is at least as large as the target capacity. Other than that the behavior is the same.</p>
<p>User may use <code><a class="el" href="classenso_1_1TxPipe.html#a657f7225e695b20cc71136747e276952" title="Returns the allocated buffer&#39;s current available capacity.">capacity()</a></code> to check the total number of available bytes after calling this function or simply use the return value.</p>
<dl class="section warning"><dt>Warning</dt><dd>The capacity will never be extended beyond <code><a class="el" href="classenso_1_1TxPipe.html#a32c0c96558b1688da50db2e734130e44">TxPipe::kMaxCapacity</a></code>. Therefore, specifying a target capacity larger than <code><a class="el" href="classenso_1_1TxPipe.html#a32c0c96558b1688da50db2e734130e44">TxPipe::kMaxCapacity</a></code> will block forever.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The new buffer capacity after extending. </dd></dl>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00887">887</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<a id="afb23a92e08c8adeda2a53444c2582628" name="afb23a92e08c8adeda2a53444c2582628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb23a92e08c8adeda2a53444c2582628">&#9670;&#160;</a></span>id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enso_pipe_id_t enso::TxPipe::id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the pipe's ID. </p>
<dl class="section return"><dt>Returns</dt><dd>The pipe's ID. </dd></dl>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00929">929</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<a id="aa89ed1148168c3702d8547b3d15089ec" name="aa89ed1148168c3702d8547b3d15089ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa89ed1148168c3702d8547b3d15089ec">&#9670;&#160;</a></span>pending_transmission()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t enso::TxPipe::pending_transmission </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the number of bytes that are currently being transmitted. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes pending transmission. </dd></dl>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00913">913</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<a id="a4f61c0c8b42904c58459dcde6e51ae0d" name="a4f61c0c8b42904c58459dcde6e51ae0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f61c0c8b42904c58459dcde6e51ae0d">&#9670;&#160;</a></span>SendAndFree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void enso::TxPipe::SendAndFree </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nb_bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends and deallocates a given number of bytes. </p>
<p>After calling this function, the previous buffer address is no longer valid. Accessing it will lead to undefined behavior.</p>
<dl class="section note"><dt>Note</dt><dd>The user must use <code><a class="el" href="classenso_1_1TxPipe.html#a45762501055df470f8c6bb2d747e8228" title="Allocates a buffer in the pipe.">AllocateBuf()</a></code> to allocate a new buffer after calling this function.</dd></dl>
<p>The pipe's capacity will also be reduced by the number of bytes sent. If sending more bytes than the pipe's current capacity, the behavior is undefined. The user must also make sure not to modify the sent bytes after calling this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nb_bytes</td><td>The number of bytes to send. Must be a multiple of <code>kQuantumSize</code>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00841">841</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<a id="aa6e38da0f8e5346fd095bfa3396052fb" name="aa6e38da0f8e5346fd095bfa3396052fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6e38da0f8e5346fd095bfa3396052fb">&#9670;&#160;</a></span>set_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void enso::TxPipe::set_context </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>new_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the context associated with the pipe. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classenso_1_1TxPipe.html#a0efac025c2a9c85093a7ae728372dd7a" title="Returns the context associated with the pipe.">TxPipe::context()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00948">948</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<a id="a8653a12e93e8899f831945d598940f2c" name="a8653a12e93e8899f831945d598940f2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8653a12e93e8899f831945d598940f2c">&#9670;&#160;</a></span>TryExtendBuf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t enso::TxPipe::TryExtendBuf </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Explicitly requests a best-effort buffer extension. </p>
<p>Will check for completed transmissions to try to extend the capacity of the currently allocated buffer. After this, capacity will be at least as large as it was before. The user can continue to use the same buffer address as before.</p>
<p>User may use <code><a class="el" href="classenso_1_1TxPipe.html#a657f7225e695b20cc71136747e276952" title="Returns the allocated buffer&#39;s current available capacity.">capacity()</a></code> to check the total number of available bytes after calling this function or simply use the return value.</p>
<dl class="section note"><dt>Note</dt><dd>The capacity will never be extended beyond <code><a class="el" href="classenso_1_1TxPipe.html#a32c0c96558b1688da50db2e734130e44">TxPipe::kMaxCapacity</a></code>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The new buffer capacity after extending. </dd></dl>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00866">866</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a520fa05e0bf58785da428f7a0241eee2" name="a520fa05e0bf58785da428f7a0241eee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a520fa05e0bf58785da428f7a0241eee2">&#9670;&#160;</a></span>Device</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classenso_1_1Device.html">Device</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l01004">1004</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a32c0c96558b1688da50db2e734130e44" name="a32c0c96558b1688da50db2e734130e44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32c0c96558b1688da50db2e734130e44">&#9670;&#160;</a></span>kMaxCapacity</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint32_t enso::TxPipe::kMaxCapacity = kEnsoPipeSize * 64 - <a class="el" href="classenso_1_1TxPipe.html#ac5ea7bc381df0483e6d478fb3775b930">kQuantumSize</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Maximum capacity achievable by the pipe. There should always be at least one buffer quantum available. </p>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00960">960</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<a id="ac5ea7bc381df0483e6d478fb3775b930" name="ac5ea7bc381df0483e6d478fb3775b930"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5ea7bc381df0483e6d478fb3775b930">&#9670;&#160;</a></span>kQuantumSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint32_t enso::TxPipe::kQuantumSize = 64</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The size of a "buffer quantum" in bytes. This is the minimum unit that can be sent at a time. Every transfer should be a multiple of this size. </p>

<p class="definition">Definition at line <a class="el" href="pipe_8h_source.html#l00954">954</a> of file <a class="el" href="pipe_8h_source.html">pipe.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="pipe_8h_source.html">pipe.h</a></li>
<li><a class="el" href="pipe_8cpp_source.html">pipe.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>enso</b></li><li class="navelem"><a class="el" href="classenso_1_1TxPipe.html">TxPipe</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
